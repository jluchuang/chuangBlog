{% extends 'base.html' %}

{% block content %}
	<div id = "article-title">
	</div>
    <div id = "article-content">
	</div>
    
    {% load threadedcomments_tags %}

    {% render_comment_list for article_obj %}
    {% render_comment_form for article_obj %}

    <!-- 在 jquery.js 之后引入 -->
    {% load staticfiles %}
    <script src="{% static "js/mycomments.js" %}"></script>

    <script type="text/javascript">
        $(document).ready(function  () {
            intArticle();
        });
        function intArticle(){
            var article = {{ article|safe }};
            var title = article.title;
            $('#article-title').append("<a href = \"/blogList/" + title+ "/ \">"+title+"</a>");
            console.log(title);

            var content = article.content;
            //var showContent = String__nl2br(String__escape(content));
            //console.log(showContent);
            $('#article-content').append(content);
            console.log(content);
        }
	</script>
    {% if user.is_authenticated %}
    <script>
        jQuery(function($) {
            setAuthenticatedUser();
        }); 
    </script>
{% endif %}
{% endblock %}
